<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeYourSelf</title>
    <link rel="stylesheet" href="./css/exam.css">
    <link href="https://fonts.googleapis.com/css2?family=Fira+Sans&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500&display=swap" rel="stylesheet" />
</head>
<body>
    <div class="container">
        <div class="heading">
          <h1 class="heading__text">Quiz</h1>
        </div>
      
        <!-- Quiz section
        <div class="quiz">
          <div class="quiz__heading">
            <h2 class="quiz__heading-text">
              Your are <span class="result"></span> right.
            </h2>
          </div>
      
          <form class="quiz-form">
            <div class="quiz-form__quiz">
              <p class="quiz-form__question">
                1. What happens to plastic waste?
              </p>
              <label class="quiz-form__ans" for="q11">
                <input type="radio" name="q1" id="q11" value="A" checked />
                <span class="design"></span>
                <span class="text">It is a biodegradable material so it eventually
                  disintegrates</span>
              </label>
              <label class="quiz-form__ans" for="q12">
                <input type="radio" name="q1" id="q12" value="B" />
                <span class="design"></span>
                <span class="text">It never fully goes away, it just breaks into little
                  pieces</span>
              </label>
              <label class="quiz-form__ans" for="q13">
                <input type="radio" name="q1" id="q13" value="C" />
                <span class="design"></span>
                <span class="text">There is no such thing as plastic waste, all plastic is
                  recycled</span>
              </label>
              <label class="quiz-form__ans" for="q14">
                <input type="radio" name="q1" id="q14" value="D" />
                <span class="design"></span>
                <span class="text">It is dumped in the ocean for fish to eat</span>
              </label>
            </div>
      
            <div class="quiz-form__quiz">
              <p class="quiz-form__question">
                2. Why is plastic dangerous for marine life?
              </p>
              <label class="quiz-form__ans" for="q21">
                <input type="radio" name="q2" id="q21" value="A" checked />
                <span class="design"></span>
                <span class="text">It's not dangerous because they use plastic waste for
                  habitats</span>
              </label>
              <label class="quiz-form__ans" for="q22">
                <input type="radio" name="q2" id="q22" value="B" />
                <span class="design"></span>
                <span class="text">They can get tangled in it which hinders their ability to
                  swim</span>
              </label>
              <label class="quiz-form__ans" for="q23">
                <input type="radio" name="q2" id="q23" value="C" />
                <span class="design"></span>
                <span class="text">They mistake it for food and cannot digest it</span>
              </label>
              <label class="quiz-form__ans" for="q24">
                <input type="radio" name="q2" id="q24" value="D" />
                <span class="design"></span>
                <span class="text">Both a and b</span>
              </label>
            </div>
      
            <div class="quiz-form__quiz">
              <p class="quiz-form__question">
                3. Where does the majority of plastic waste end up?
              </p>
              <label class="quiz-form__ans" for="q31">
                <input type="radio" name="q3" id="q31" value="A" checked />
                <span class="design"></span>
                <span class="text">Recycled</span>
              </label>
              <label class="quiz-form__ans" for="q32">
                <input type="radio" name="q3" id="q32" value="B" />
                <span class="design"></span>
                <span class="text">Oceans</span>
              </label>
              <label class="quiz-form__ans" for="q33">
                <input type="radio" name="q3" id="q33" value="C" />
                <span class="design"></span>
                <span class="text">Burned for energy</span>
              </label>
              <label class="quiz-form__ans" for="q34">
                <input type="radio" name="q3" id="q34" value="D" />
                <span class="design"></span>
                <span class="text">Landfills</span>
              </label>
            </div>
      
            <div class="quiz-form__quiz">
              <p class="quiz-form__question">
                4. What percent of its plastic does the US recycle?
              </p>
              <label class="quiz-form__ans" for="q41">
                <input type="radio" name="q4" id="q41" value="A" checked />
                <span class="design"></span>
                <span class="text">9%</span>
              </label>
              <label class="quiz-form__ans" for="q42">
                <input type="radio" name="q4" id="q42" value="B" />
                <span class="design"></span>
                <span class="text">35%</span>
              </label>
              <label class="quiz-form__ans" for="q43">
                <input type="radio" name="q4" id="q43" value="C" />
                <span class="design"></span>
                <span class="text">50%</span>
              </label>
              <label class="quiz-form__ans" for="q44">
                <input type="radio" name="q4" id="q44" value="D" />
                <span class="design"></span>
                <span class="text">75%</span>
              </label>
            </div>
      
            <div class="quiz-form__quiz">
              <p class="quiz-form__question">
                5. Which of these countries have NOT made national plastic bag
                regulations?
              </p>
              <label class="quiz-form__ans" for="q51">
                <input type="radio" name="q5" id="q51" value="A" checked />
                <span class="design"></span>
                <span class="text">Kenya</span>
              </label>
              <label class="quiz-form__ans" for="q52">
                <input type="radio" name="q5" id="q52" value="B" />
                <span class="design"></span>
                <span class="text">USA</span>
              </label>
              <label class="quiz-form__ans" for="q53">
                <input type="radio" name="q5" id="q53" value="C" />
                <span class="design"></span>
                <span class="text">Rwanda</span>
              </label>
              <label class="quiz-form__ans" for="q54">
                <input type="radio" name="q5" id="q54" value="D" />
                <span class="design"></span>
                <span class="text">China</span>
              </label>
            </div>
      
            <div class="quiz-form__quiz">
              <p class="quiz-form__question">
                6. What percentage of emitted carbon dioxide is absorbed by the
                oceans?
              </p>
              <label class="quiz-form__ans" for="q61">
                <input type="radio" name="q6" id="q61" value="A" checked />
                <span class="design"></span>
                <span class="text">10%</span>
              </label>
              <label class="quiz-form__ans" for="q62">
                <input type="radio" name="q6" id="q62" value="B" />
                <span class="design"></span>
                <span class="text">40%</span>
              </label>
              <label class="quiz-form__ans" for="q63">
                <input type="radio" name="q6" id="q63" value="C" />
                <span class="design"></span>
                <span class="text">50%</span>
              </label>
              <label class="quiz-form__ans" for="q64">
                <input type="radio" name="q6" id="q64" value="D" />
                <span class="design"></span>
                <span class="text">77%</span>
              </label>
            </div>
      
            <div class="quiz-form__quiz">
              <p class="quiz-form__question">
                7. On average, how long is a plastic bag used by a person before
                being thrown away?
              </p>
              <label class="quiz-form__ans" for="q71">
                <input type="radio" name="q7" id="q71" value="A" checked />
                <span class="design"></span>
                <span class="text">1 hour</span>
              </label>
              <label class="quiz-form__ans" for="q72">
                <input type="radio" name="q7" id="q72" value="B" />
                <span class="design"></span>
                <span class="text">12 minutes</span>
              </label>
              <label class="quiz-form__ans" for="q73">
                <input type="radio" name="q7" id="q73" value="C" />
                <span class="design"></span>
                <span class="text">1 day</span>
              </label>
              <label class="quiz-form__ans" for="q74">
                <input type="radio" name="q7" id="q74" value="D" />
                <span class="design"></span>
                <span class="text">1 week</span>
              </label>
            </div>
      
            <div class="quiz-form__quiz">
              <p class="quiz-form__question">
                8. About 71% of the Earth is covered with water. How much of it is
                fresh water?
              </p>
              <label class="quiz-form__ans" for="q81">
                <input type="radio" name="q8" id="q81" value="A" checked />
                <span class="design"></span>
                <span class="text">2.5%</span>
              </label>
              <label class="quiz-form__ans" for="q82">
                <input type="radio" name="q8" id="q82" value="B" />
                <span class="design"></span>
                <span class="text">5%</span>
              </label>
              <label class="quiz-form__ans" for="q83">
                <input type="radio" name="q8" id="q83" value="C" />
                <span class="design"></span>
                <span class="text">20%</span>
              </label>
              <label class="quiz-form__ans" for="q84">
                <input type="radio" name="q8" id="q84" value="D" />
                <span class="design"></span>
                <span class="text">50%</span>
              </label>
            </div>
      
            <div class="quiz-form__quiz">
              <p class="quiz-form__question">
                9. More than half of the breathable oxygen in the world comes
                from?
              </p>
              <label class="quiz-form__ans" for="q91">
                <input type="radio" name="q9" id="q91" value="A" checked />
                <span class="design"></span>
                <span class="text">The oceans</span>
              </label>
              <label class="quiz-form__ans" for="q92">
                <input type="radio" name="q9" id="q92" value="B" />
                <span class="design"></span>
                <span class="text">The forests</span>
              </label>
              <label class="quiz-form__ans" for="q93">
                <input type="radio" name="q9" id="q93" value="C" />
                <span class="design"></span>
                <span class="text">Lakes</span>
              </label>
              <label class="quiz-form__ans" for="q94">
                <input type="radio" name="q9" id="q94" value="D" />
                <span class="design"></span>
                <span class="text">Clouds</span>
              </label>
            </div>
      
            <div class="quiz-form__quiz">
              <p class="quiz-form__question">
                10. About how many plastic grocery bags do Americans throw away
                each year?
              </p>
              <label class="quiz-form__ans" for="q101">
                <input type="radio" name="q10" id="q101" value="A" checked />
                <span class="design"></span>
                <span class="text">10 million</span>
              </label>
              <label class="quiz-form__ans" for="q102">
                <input type="radio" name="q10" id="q102" value="B" />
                <span class="design"></span>
                <span class="text">500 million</span>
              </label>
              <label class="quiz-form__ans" for="q103">
                <input type="radio" name="q10" id="q103" value="C" />
                <span class="design"></span>
                <span class="text">1 billion</span>
              </label>
              <label class="quiz-form__ans" for="q104">
                <input type="radio" name="q10" id="q104" value="D" />
                <span class="design"></span>
                <span class="text">100 billion</span>
              </label>
            </div>
      
            <input class="submit" type="submit" value="Submit" />
          </form>
        </div> -->
        <div class="container">
          <div class="row">
            <div class="quiz-wrapper">
              <form id="quiz">
                <div class="quiz-navigation">
                  <input type="submit" id="prev" value="prev">
                  <input type="submit" id="next" value="next">
                </div>
              </form>
            </div>
          </div>
        </div>
      
      </div>

      <script>
        var QuestionsArray = [
        {
          question: 'Entomology is the science that studies:',
          answers: [
            'Behavior of human beings',
            'Insects',
            'The origin and history of technical and scientific terms',
            'The formation of rocks'
          ],
          correctAnswer: 1,
        },
        {
          question: 'Galileo was an Italian astronomer who:',
          answers: [
            'developed the telescope',
            'discovered four satellites of Jupiter',
            'discovered that the movement of pendulum produces a regular time measurement',
            'All of the above'
          ],
          correctAnswer: 3,
        },
        {
          question: 'Exposure to sunlight helps a person improve his health because:',
          answers: [
            'the infrared light kills bacteria in the body',
            'resistance power increases',
            'the pigment cells in the skin get stimulated and produce a healthy tan',
            'the ultraviolet rays convert skin oil into Vitamin D'
          ],
          correctAnswer: 3,
        },
        {
          question: '\'OS\' computer abbreviation usually means:',
          answers: [
            'Order of Significance',
            'Open Software',
            'Operating System',
            'Optical Sensor'
          ],
          correctAnswer: 2,
        },
        {
          question: 'Which scientist discovered the radioactive element radium?',
          answers: [
            'Isaac Newton',
            'Albert Einstein',
            'Benjamin Franklin',
            'Marie Curie'
          ],
          correctAnswer: 3,
        },
        {
          question: 'The great Victoria Desert is located in:',
          answers: [
            'Canada',
            'West Africa',
            'Australia',
            'North America'
          ],
          correctAnswer: 2,
        },
        {
          question: 'Euclid was',
          answers: [
            'Greek mathematician',
            'Contributor to the use of deductive principles of logic as the basis of geometry',
            'Propounded the geometrical theorems',
            'All of the above'
          ],
          correctAnswer: 3,
        },
        {
          question: 'Who invented Dynamite?',
          answers: [
            'Alfred B. Nobel',
            'Sir Alexander Graham Bell',
            'Benjamin Franklin',
            'Thomas Alva Edison'
         
          ],
          correctAnswer: 0,
        }
      ];
      var quiz = document.getElementById('quiz'),
          quizNav = document.getElementsByClassName('quiz-navigation')[0];
      quiz.addEventListener('submit',function(e) {
        e.preventDefault();
      });
      
      
      var QuestionElement = function(QuestionObject,parentElement,questionPosition) {
        this.question = QuestionObject;
        this.position = questionPosition;
        this.element = document.createElement('div');
        this.element.className = 'question-wrapper';
        this.inputs = [];
        this.labels = [];
        this.create = function() {
          var self = this;
          //var content = '<h2>' + (this.position + 1) + '. ' + QuestionObject.question +'</h2>';
          this.element.innerHTML = '<h2>' + (this.position + 1) + '. ' + QuestionObject.question +'</h2>';
          QuestionObject.answers.forEach(function(answer,index) {
            //content += '<div class="answer">';
            //-----------
            var answerWrapper = document.createElement('div');
            answerWrapper.className = 'answer';
            var input = document.createElement('input');
            input.type = 'radio';
            input.id = questionPosition + '-' + index + '-num';
            input.name = 'question-' + questionPosition;
            input.value = index;
            var label = document.createElement('label');
            label.htmlFor = questionPosition + '-' + index + '-num';
            label.textContent = answer;
            answerWrapper.appendChild(input);
            answerWrapper.appendChild(label);
            //console.log(answerWrapper.innerHTML);
            self.inputs.push(input);
            self.labels.push(label);
            self.element.appendChild(answerWrapper);
            input.addEventListener('change',function() {
              self.updateAnswer();
              //alert(self.isAnswerCorrect());
            });
            //-----------
            //content += '<input type="radio" id="' + questionPosition + '-' + index + '-num" name="question-' + questionPosition + '" value="' + index + '">';
            //content += '<label for="' + questionPosition + '-' + index + '-num">' + answer + '</label>';
            //content += '</div>';
          });
          //console.log(self.inputs);
          //this.element.innerHTML = content;
        };
        this.answer = null;
        this.updateAnswer = function() {
          //lecę przez wszystkie elementy z tym samym atrybutem name i sprawdzam który zaznaczony
          var self = this;
          this.inputs.forEach(function(input) {
            if (input.checked) {
              self.answer = input.value;
            }
          });
        }
        this.isAnswerCorrect = function() {
          if (this.answer === null) {
            return false;
          }
          return this.question.correctAnswer === Number(this.answer);
        };
        this.showCorrect = function() {
          this.labels[this.question.correctAnswer].style.color = '#090';
        };
        this.showUserAnswers = function() {
          if (this.answer) {
            this.labels[this.answer].style.color = '#900';
          }
        };
        this.append = function() {
          this.create();
          //parentElement.appendChild(this.element);//może być problem z this
          parentElement.insertBefore(this.element,quizNav);
        };
        this.show = function() {
          this.element.style.display = 'block';
        };
        this.hide = function() {
          this.element.style.display = 'none';
        }
      }
      
      
      
      var questions = [];
      QuestionsArray.forEach(function(q,index) {
        questions.push(new QuestionElement(q,quiz,index));
        questions[index].append();
      });
      //quiz.innerHTML += '<input type="submit" value="next">';
      
      
      var Quiz = {
        showAnswers: function() {
          //var content = '<h2>Answers</h2>';
          questions.forEach(function(q) {
            /* content += '<div>';
            content += '</div>'; */
            q.show();
            q.showUserAnswers();
            q.showCorrect();
            q.inputs.forEach(function(inp) {
              inp.disabled = true;
              inp.style.display = 'none';
            });
          });
        }
      }
      
      
      
      var QuizNavigation = {
        currentQuestion: 0,
        nextBtn: document.getElementById('next'),
        prevBtn: document.getElementById('prev'),
        numberBtns: [],
        showQuestion: function(index) {
          questions.forEach(function(q) {
            if (q.position !== index) {
              q.hide();
              //console.log(q.position);
            }
          });
          questions[index].show();
          this.currentQuestion = index;
        },
        next: function() {
          var self = this;
          self.showQuestion(++self.currentQuestion);
        },
        prev: function() {
          this.showQuestion(--this.currentQuestion);
        },
        makeNumbers: function() {
          var self = this;
          questions.forEach(function(q) {
            var numberBtn = document.createElement('button');
            numberBtn.textContent = q.position + 1;
            numberBtn.addEventListener('click',function() {
              self.showQuestion(q.position);
              self.checkPos();
            });
            //quizNav.appendChild(numberBtn);
            self.numberBtns.push(numberBtn);
            quizNav.insertBefore(numberBtn,self.nextBtn);
      
          });
        },
        checkPos: function() {
          this.numberBtns.forEach(function(btn) {
            btn.disabled = '';
          });
          this.numberBtns[this.currentQuestion].disabled = true;
          if (this.currentQuestion === 0) {
            this.prevBtn.disabled = true;
          } else {
            this.prevBtn.disabled = '';
          }
          if (this.currentQuestion === (questions.length - 1)) {
            this.nextBtn.disabled = true;
            this.endQuizBtn.add();
          } else {
            this.nextBtn.disabled = '';
            this.endQuizBtn.remove();
          }
        },
        endQuizBtn: {
          element: document.createElement('button'),
          add: function() {
            var self = this;
            self.element.textContent = 'End quiz';
            quizNav.appendChild(self.element);
          },
          remove: function() {
            var self = this;
            if (quizNav.lastChild === self.element) {//tutaj pewnie można zrobić lepsze sprawdzenie
              quizNav.removeChild(self.element);
            }
          },
          clicked: function() {
            var score = 0;
            questions.forEach(function(q) {
              if (q.isAnswerCorrect()) {
                ++score;
              }
            });
            //var content = '<h2>Your score: ' + score + '</h2>';
            var showScore = document.createElement('h2');
            showScore.textContent = 'Your score: ' + score;
            //alert(score);
            quiz.appendChild(showScore);
            Quiz.showAnswers();
            quizNav.style.display = 'none';
          },
          addEvent: function() {
            var self = this;
            this.element.addEventListener('click',function() {
              self.clicked();
              //alert('fddsf');
            });
          }
        },
        handleEvents: function() {
          var self = this;
          this.nextBtn.addEventListener('click',function() {
            self.next();
            self.checkPos();
          });
          this.prevBtn.addEventListener('click',function() {
            self.prev();
            self.checkPos();
          });
          this.endQuizBtn.addEvent();
        }
      };
      
      
      
      QuizNavigation.showQuestion(0);
      QuizNavigation.makeNumbers();
      QuizNavigation.checkPos(questions[0]);
      QuizNavigation.handleEvents();
      </script>    
</body>
</html>